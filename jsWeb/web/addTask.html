<html>
<head>
    <title>Add task</title>
    <script src="script/utility.js"></script>
    <script>
        function checkInput() {
            add.task.value = add.task.value.trim();
            if (add.task.value === "") {
                document.getElementById("errMsg").innerHTML = "Task is empty";
                return false;
            }
            const date = add.date.value.trim()
            if (date === "") {
                document.getElementById("errMsg").innerHTML = "Date is empty";
                return false;
            }
            const d_arr = date.split('-');
            const d = new Date(d_arr[0] + '/' + d_arr[1] + '/' + d_arr[2] + '');
            if (d_arr[0] != d.getFullYear() || d_arr[1] != (d.getMonth() + 1) || d_arr[2] != d.getDate()) {
                document.getElementById("errMsg").innerHTML = "invalid date...";
                return false;
            }
            add.submit();
        }

        function start() {
            let nameTable = getCookie('table').trim()
            if (nameTable === 'Today' || nameTable === 'Tomorrow') {
                document.getElementById('inputDate').setAttribute('value', date(nameTable))
            }
        }
    </script>
</head>
<body onload="start()">
<form name="add" action="add" method="post">
    <table>
        <tr>
            <td><i>Task:</i></td>
            <td><input type="text" name="task"/></td>
        </tr>
        <tr>
            <td><i> Date:</i></td>
            <td><input id="inputDate" type="date" name="date"></td>
        </tr>
    </table>
    <br>
    <p id="errMsg" style="color:red;"></p><br>
    <input type="submit" name="enter" value="Add" onclick="return checkInput()"/><br>
</form>
</body>
</html>